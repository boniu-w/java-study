# 1. spring解决了哪些问题,如果不用spring,会有什么情况,

如果现在的开发使用了纯粹的JSP+Servlet+JDBC开发，代码的确是最简单的，但是带来的后续结果就是维护麻烦，而且不停的自己处理所有的操作关系，写出的反射应用，开发与维护成本太高了

随着技术的发展，有了更好的替代产品：

1.显示层：Jquery+JSON，简化数据传输，同时隐藏DOM操作的细节，或者使用bootstrap前台框架就行页面修饰（简化DIV+CSS修饰）；

 2.控制层：利用Struts2.x完成，提供了拦截器就行数据验证、提供了自动的数据类型的转换（VO的处理操作），方便用户就行数据上传操作、所有资源配置容易、调整路径配置容易。

3.数据层：使用Hibernate代替了已有的JDBC处理，利用了Hibernate提供的单表数据、数据查询、数据关联以及缓存机制等概念提升数据的操作性能与代码的开发简化；



但是随着这些问题的解决，发现业务层的问题越来越越多了，如果说要使用Struts2.x+Hibernate开发，虽然再控制层与数据层的操作上得到了大规模的改进，但是依然不可避免的要处理如下情况：

1.数据层依然需要定义操作接口标准，依然需要定义子类，依然要准备DAOFactory;

2.业务层依然需要负责关闭数据库，手工处理事务，利用工厂类调用数据层，定义自己的ServiceFactory;

3.在控制层里面依然需要业务层工厂类取得相应的对象信息。



spring 框架都做了哪些事?

1. 统一了应用程序的编程模型

Spring框架提供了一系列的组件和工具，用于统一应用程序的编程模型。这些组件包括：

- 核心容器：提供了依赖注入和控制反转功能，管理应用程序中的对象。
- 数据访问/集成层：提供了对JDBC、ORM框架、NoSQL数据库等多种数据访问技术的支持。
- Web应用开发框架：提供了一系列的组件和工具，用于开发Web应用程序，包括Web MVC框架、Web安全框架、RESTful Web服务框架等。
- AOP框架：实现了面向切面编程，将应用程序的横切逻辑（如日志记录、事务管理等）与业务逻辑分离开来，提高了应用程序的可维护性和可扩展性。
- 消息传递：提供了一系列的组件和工具，用于实现消息传递功能，包括JMS、AMQP等。

这些组件和工具都是为了简化应用程序的开发和维护，提高开发人员的效率。

2. 实现了面向切面编程

Spring框架通过AOP技术实现了面向切面编程。面向切面编程将应用程序的横切逻辑（如日志记录、事务管理等）与业务逻辑分离开来，从而提高了应用程序的可维护性和可扩展性。

Spring框架提供了一系列的AOP组件和工具，包括切面、切点、通知、连接点等。开发人员可以使用这些组件和工具来实现各种横切逻辑。

3. 提供了依赖注入和控制反转功能

Spring框架通过依赖注入和控制反转功能，解决了应用程序中对象之间的耦合关系，使得开发人员可以更加灵活地组装和管理应用程序中的对象。

依赖注入指的是将一个对象所依赖的其他对象通过构造函数、setter方法或者字段注入到该对象中。控制反转指的是将应用程序的对象的创建和管理交给Spring框架，而不是由开发人员手动创建和管理对象。

Spring框架提供了一系列的依赖注入和控制反转的方式，包括构造函数注入、setter注入、自动装配等。开发人员可以根据实际情况选择不同的方式来管理应用程序中的对象。

4. 支持多种数据访问技术

Spring框架提供了对多种数据访问技术的支持，包括JDBC、ORM框架、NoSQL数据库等。通过使用Spring框架，开发人员可以很方便地访问和操作不同类型的数据源，提高了开发效率。

5. 提供了Web应用开发框架

Spring框架提供了一系列的组件和工具，用于开发Web应用程序。这些组件和工具包括Web MVC框架、Web安全框架、RESTful Web服务框架等。

Web MVC框架是Spring框架中最核心的组件之一，用于开发基于MVC模式的Web应用程序。Web安全框架提供了一系列的组件和工具，用于实现Web应用程序的安全功能。RESTful Web服务框架提供了一种简单、轻量级、灵活的Web服务开发方式，非常适合于构建移动应用程序或者前端应用程序的后端服务。

6. 简化了测试

Spring框架提供了一系列的组件和工具，用于简化应用程序的测试工作。这些组件和工具包括Spring Test框架、Mock对象、JUnit、TestNG等。

Spring Test框架提供了一系列的注解和工具，用于简化测试代码的编写。Mock对象可以用来模拟应用程序中的对象，从而简化测试工作。JUnit和TestNG是两种常用的测试框架，Spring框架与这两种框架的集成非常紧密。

7. 提供了面向切面编程和声明式事务管理

Spring框架提供了面向切面编程和声明式事务管理功能，这两个功能可以有效地提高应用程序的可维护性和可扩展性。

面向切面编程将应用程序的横切逻辑（如日志记录、事务管理等）与业务逻辑分离开来，从而提高了应用程序的可维护性和可扩展性。声明式事务管理允许开发人员将事务管理逻辑与业务逻辑分离开来，从而提高了应用程序的可维护性和可扩展性。

总之，Spring框架是一个非常强大的开发框架，它可以帮助开发人员简化应用程序的开发和维护工作，提高开发人员的效率，同时也可以提高应用程序的可维护性和可扩展性

# 2. 怎么理解spring 容器 这个概念

它解决了横切面编程以及注入编程的窘境,各个框架之间的整合操作是一个的问题，而Spring解决了这个问题,也就是说最早的Spring提供的是一个工厂设计模式，同时也提供了不同开发框架的资源整合。

首先需要明确的是，spring本身提供的是自己的容器，如果是容器，那么容器可以负责维持对象的状态，或者是某一个操作的横切。而在整个spring里面提供了如下核心组件：

**1.容器核心组件：**

Beans :表示的是spring对所有Bean对象的管理，主要是包含了对象间的关系配置以及一些对象的实例化操作。

Core：包含了最底层的开发支持，例如：依赖的注入关系、资源文件的访问，数据类型的转换；

Context:提供的是一个完整的容器上下文，在这个上下文可以处理对象生命周期或者是事务；

SPEL：表达式语言模块，利用SPEL实现表达式语言的操作，以增强String的功能；

**2.切面编程：**

AOP：是整个spring的灵魂所在，利用切面编程来辅助性操作，例如：数据库关闭、事务处理；

Aspect: 表示的是切面编程的语法支持，该语法形式最早起源于Apache中的AspectJ组件；

Instrumetation: 是在JDK1.5之后增加的一个组件，主要用于检测JVM在运行中代码的动态处理过程；

Messaging：信息体系结构和协议支持；

**3.数据访问模块：**

JDBC:在整个Java之中，对于数据库的操作只有JDBC一种操作形式，所以在spring也提供了一种ORMapping框架，这个框架利用JDBC半原生完成；

ORM：ORMapping框架的处理操作，可以方便的整合JDO,Hibernate,IBatis,MyBatis等常见组件；

OXM：提供了一个对象与XML 文件之间的互相转换；

JMS:提供消息服务的支持；

Transactions : 表示在数据访问模块支持了事务的操作处理

**4.WEB支持模块：**

MVC：spring提供了自己的MVC实现（是目前最好的一种）；

Struts: spring 方便的支持Struts的管理（方便的是Struts2.x）;

Servlet: 自己负责处理MVC 的Servlet程序类；

websocket： sockjs WebSocket的实现,包括对 STOMP的支持



现在可以发现，整个Spring完全承办了一个项目能够独立开发，并且可以容纳其他框架同时存在的综合性框架，

不像struts只能负责控制层的，而hibernate只能负责数据层，spring全都可以就行负责。



**总结：**

spring中避免了关键字new造成耦合的问题；

spring本身就是一个工厂，不需要在编写工厂类了；

spring不在需要就行明确的引用关系传递，直接通过配置完成；

所有框架几乎都可以在spring中整合在一起使用；

spring编程 = Factory设计模式 + Proxy设计模式。



# 3. spring bean

Spring在创建Bean的过程中分为三步

1. 实例化，对应方法：`AbstractAutowireCapableBeanFactory`中的`createBeanInstance`方法
2. 属性注入，对应方法：`AbstractAutowireCapableBeanFactory`的`populateBean`方法
3. 初始化，对应方法：`AbstractAutowireCapableBeanFactory`的`initializeBean`

这些方法在之前源码分析的文章中都做过详细的解读了，如果你之前没看过我的文章，那么你只需要知道

1. 实例化，简单理解就是new了一个对象
2. 属性注入，为实例化中new出来的对象填充属性
3. 初始化，执行aware接口中的方法，初始化方法，完成`AOP`代理



![](.\img\create-bean.png)



## 2. bean 的生命周期

1. spring扫描scan指定的包下添加了Component等注解的类
2. 为这些类创建一个BeanDefinition的子类对象，这个子类对象包含这个类的一些基本信息如类名称、描述、构造器参数、是否需要延迟加载等等
3. 将这个子类对象放到Spring的单例池（是一个map）中，
4. 通过for循环获取BeanDefinition子类对象的构成的map中的子类对象，查看这个类的基本信息，进行验证，如果需要创建对象，就调用prestantiateSingletons将此类new出来，放到Spring单例池中。

# 4. spring 配置



# 5. spring 问题

1. add springbootapplication to classpath



# 6. spring 替代

除了 Spring 框架，还有很多其他的 Java 框架可以用来构建 Web 应用程序或者企业级应用程序，其中一些比较流行的框架如下：

Apache Struts：Struts 是一个基于 MVC 模式的 Web 框架，它使用 JSP 和标签库作为视图层，以及 Action 类作为控制器层，可以方便地实现表单处理、验证和数据绑定等功能。

Hibernate：Hibernate 是一个 ORM 框架，它可以将 Java 对象映射到关系数据库中的表结构，从而方便地进行数据操作和管理，同时也支持缓存、事务管理等功能。

Apache Wicket：Wicket 是一个基于组件化编程的 Web 框架，它使用面向对象的编程风格，将 HTML 页面和 Java 代码完全分离，从而实现了良好的可维护性和可测试性。

Apache Tapestry：Tapestry 是一个基于组件化编程的 Web 框架，它使用类似于 HTML 的模板语言和 Java 代码实现了良好的视图层和控制器层的分离，同时还支持依赖注入、事件驱动等功能。

Play Framework：Play 是一个基于 Akka 和 Scala 语言的 Web 框架，它使用响应式编程的思想，实现了高并发、高可伸缩性和低延迟的 Web 应用程序。

这些框架各有特点和适用场景，可以根据具体的需求和技术栈进行选择和使用。